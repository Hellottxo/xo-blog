<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>继承 | XO&#39;S BLOG</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/xo-blog/logo.svg">
    <meta name="description" content="">
    <link rel="preload" href="/xo-blog/assets/css/0.styles.c46e3eb6.css" as="style"><link rel="preload" href="/xo-blog/assets/js/app.205460ca.js" as="script"><link rel="preload" href="/xo-blog/assets/js/23.8124e3e4.js" as="script"><link rel="preload" href="/xo-blog/assets/js/22.896e3b57.js" as="script"><link rel="preload" href="/xo-blog/assets/js/48.cdf75c28.js" as="script"><link rel="prefetch" href="/xo-blog/assets/js/1.255e521e.js"><link rel="prefetch" href="/xo-blog/assets/js/10.e1e038dd.js"><link rel="prefetch" href="/xo-blog/assets/js/11.03ddf2c2.js"><link rel="prefetch" href="/xo-blog/assets/js/12.c92cd54d.js"><link rel="prefetch" href="/xo-blog/assets/js/13.f15be6a2.js"><link rel="prefetch" href="/xo-blog/assets/js/14.d8bd85dd.js"><link rel="prefetch" href="/xo-blog/assets/js/15.fd3565cd.js"><link rel="prefetch" href="/xo-blog/assets/js/16.cd3036c7.js"><link rel="prefetch" href="/xo-blog/assets/js/17.bc1d9bad.js"><link rel="prefetch" href="/xo-blog/assets/js/18.6b60913f.js"><link rel="prefetch" href="/xo-blog/assets/js/19.1e8a5d14.js"><link rel="prefetch" href="/xo-blog/assets/js/2.44eb810f.js"><link rel="prefetch" href="/xo-blog/assets/js/20.02efb0ee.js"><link rel="prefetch" href="/xo-blog/assets/js/24.6cf22ece.js"><link rel="prefetch" href="/xo-blog/assets/js/25.b500bc5c.js"><link rel="prefetch" href="/xo-blog/assets/js/26.0d928778.js"><link rel="prefetch" href="/xo-blog/assets/js/27.02f26ab7.js"><link rel="prefetch" href="/xo-blog/assets/js/28.e620a1ba.js"><link rel="prefetch" href="/xo-blog/assets/js/29.b078606c.js"><link rel="prefetch" href="/xo-blog/assets/js/3.05d78ff2.js"><link rel="prefetch" href="/xo-blog/assets/js/30.eb298b4c.js"><link rel="prefetch" href="/xo-blog/assets/js/31.d6d1dfda.js"><link rel="prefetch" href="/xo-blog/assets/js/32.9de59eff.js"><link rel="prefetch" href="/xo-blog/assets/js/33.cb195d93.js"><link rel="prefetch" href="/xo-blog/assets/js/34.e2647ab4.js"><link rel="prefetch" href="/xo-blog/assets/js/35.913c611e.js"><link rel="prefetch" href="/xo-blog/assets/js/36.99e0f0fa.js"><link rel="prefetch" href="/xo-blog/assets/js/37.fbb9dd75.js"><link rel="prefetch" href="/xo-blog/assets/js/38.6e8a10fa.js"><link rel="prefetch" href="/xo-blog/assets/js/39.2bfdb0d9.js"><link rel="prefetch" href="/xo-blog/assets/js/4.95d949dc.js"><link rel="prefetch" href="/xo-blog/assets/js/40.581435ed.js"><link rel="prefetch" href="/xo-blog/assets/js/41.e57ba8b4.js"><link rel="prefetch" href="/xo-blog/assets/js/42.b4cdec14.js"><link rel="prefetch" href="/xo-blog/assets/js/43.2c61eb8f.js"><link rel="prefetch" href="/xo-blog/assets/js/44.7f2d6f92.js"><link rel="prefetch" href="/xo-blog/assets/js/45.6502a819.js"><link rel="prefetch" href="/xo-blog/assets/js/46.f716db31.js"><link rel="prefetch" href="/xo-blog/assets/js/47.23d57d0d.js"><link rel="prefetch" href="/xo-blog/assets/js/49.f0ecb5ce.js"><link rel="prefetch" href="/xo-blog/assets/js/5.df069e2f.js"><link rel="prefetch" href="/xo-blog/assets/js/50.5eeb25d9.js"><link rel="prefetch" href="/xo-blog/assets/js/51.7fdcac0a.js"><link rel="prefetch" href="/xo-blog/assets/js/52.e39c4f1f.js"><link rel="prefetch" href="/xo-blog/assets/js/53.1c2b5cf1.js"><link rel="prefetch" href="/xo-blog/assets/js/6.f1eea2d6.js"><link rel="prefetch" href="/xo-blog/assets/js/7.1a1b297e.js"><link rel="prefetch" href="/xo-blog/assets/js/8.dfb0b2df.js"><link rel="prefetch" href="/xo-blog/assets/js/9.988ddcde.js">
    <link rel="stylesheet" href="/xo-blog/assets/css/0.styles.c46e3eb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar" style="z-index:10;"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xo-blog/" class="home-link router-link-active"><!----> <span class="site-name">XO'S BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/Hellottxo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://xo.silenttt.top/xo-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XO-UI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://xo.silenttt.top/leetcode-records" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leetcode-records
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/Hellottxo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://xo.silenttt.top/xo-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XO-UI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://xo.silenttt.top/leetcode-records" target="_blank" rel="noopener noreferrer" class="nav-link external">
  leetcode-records
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xo-blog/js/this.html" class="sidebar-link">this的指向</a></li><li><a href="/xo-blog/js/variable.html" class="sidebar-link">变量和类型</a></li><li><a href="/xo-blog/js/prototype.html" class="sidebar-link">原型和原型链</a></li><li><a href="/xo-blog/js/inheritance.html" class="active sidebar-link">继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xo-blog/js/inheritance.html#_1-原型链" class="sidebar-link">1. 原型链</a></li><li class="sidebar-sub-header"><a href="/xo-blog/js/inheritance.html#_2-借用构造函数" class="sidebar-link">2. 借用构造函数</a></li><li class="sidebar-sub-header"><a href="/xo-blog/js/inheritance.html#_3-组合继承" class="sidebar-link">3. 组合继承</a></li><li class="sidebar-sub-header"><a href="/xo-blog/js/inheritance.html#_4-原型式继承" class="sidebar-link">4. 原型式继承</a></li><li class="sidebar-sub-header"><a href="/xo-blog/js/inheritance.html#_5-寄生式继承" class="sidebar-link">5. 寄生式继承</a></li><li class="sidebar-sub-header"><a href="/xo-blog/js/inheritance.html#_6-寄生组合式继承" class="sidebar-link">6. 寄生组合式继承</a></li></ul></li><li><a href="/xo-blog/js/handleWrite.html" class="sidebar-link">手写系列</a></li><li><a href="/xo-blog/js/promise.html" class="sidebar-link">手写Promise</a></li><li><a href="/xo-blog/js/implicitConversion.html" class="sidebar-link">隐式转换</a></li><li><a href="/xo-blog/js/event.html" class="sidebar-link">事件委托</a></li><li><a href="/xo-blog/js/frame.html" class="sidebar-link">Vue/React</a></li><li><a href="/xo-blog/js/numInJs.html" class="sidebar-link">小数精度丢失的原因</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xo-blog/css/transform.html" class="sidebar-link">用css实现视差效果</a></li><li><a href="/xo-blog/css/loading-animation.html" class="sidebar-link">loading动画</a></li><li><a href="/xo-blog/css/css.html" class="sidebar-link">css基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>html</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xo-blog/html/h5.html" class="sidebar-link">html5</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xo-blog/browser/eventloop.html" class="sidebar-link">Eventloop 事件循环</a></li><li><a href="/xo-blog/browser/cache.html" class="sidebar-link">浏览器缓存策略</a></li><li><a href="/xo-blog/browser/reflow.html" class="sidebar-link">回流和重绘</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xo-blog/computerNetwork/http.html" class="sidebar-link">http</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xo-blog/algorithm/sort.html" class="sidebar-link">排序算法</a></li><li><a href="/xo-blog/algorithm/subject.html" class="sidebar-link">算法题记录</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>继承（Inheritance）是一种在新对象上复用现有对象的属性的形式。让我们详细了解一下各种继承的方式。
</p> <h2 id="_1-原型链"><a href="#_1-原型链" class="header-anchor">#</a> 1. 原型链</h2> <blockquote><p>利用原型链让一个引用类型继承另一个引用类型的属性和方法。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Lisa'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person2<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Lisa'</span>
</code></pre></div><p>所有的引用类型都默认继承了<code>Object</code>,而这个继承就是通过原型链实现的。<br>
所有函数的默认原型都是<code>Object</code>的实例，因此所有函数的默认原型都存在一个[[Prototype]]指针，指向<code>Object.prototype</code>。<br>
因此，上述例子的原型链：<code>instance -&gt; person2.prototype -&gt; person1.prototype -&gt; Object.prototype -&gt; null</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token operator">===</span> person2<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token operator">===</span> person1<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><p>问题：</p> <ol><li>原型中包含引用类型的值时，在实例化对象中修改，同样会影响到原型。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>habbit <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'read'</span><span class="token punctuation">,</span> <span class="token string">'tennis'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getHabbit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>habbit<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person2<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span>habbit<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> anotherInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherInstance<span class="token punctuation">.</span><span class="token function">getHabbit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['tennis']</span>
</code></pre></div><ol start="2"><li>无法在影响其他实例对象的同时，向超类型函数传参。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person2<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person1</span><span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Alice'</span>
<span class="token keyword">const</span> anotherInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherInstance<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Alice'</span>
</code></pre></div><h2 id="_2-借用构造函数"><a href="#_2-借用构造函数" class="header-anchor">#</a> 2. 借用构造函数</h2> <blockquote><p>在子类型构造函数内部调用超类型构造函数。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Lisa'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">person1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 'Lisa'</span>
</code></pre></div><p>问题：</p> <ol><li>方法都在构造函数中定义，无法进行函数复用。</li> <li>超类型中定义的方法，子类型不可见。</li></ol> <h2 id="_3-组合继承"><a href="#_3-组合继承" class="header-anchor">#</a> 3. 组合继承</h2> <blockquote><p>是使用原型链实现对原型属性和方法的继承，而通过借用构造函数来实现对实例属性的继承。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>habbit <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tennis'</span><span class="token punctuation">,</span> <span class="token string">'read'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">person1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person2<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> person1<span class="token punctuation">;</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token string">'Lisa'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello, I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> anoterInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token string">'Eli'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
anoterInstance<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello, I am Eli'</span>
instance<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello, I am Lisa'</span>

instance<span class="token punctuation">.</span>habbit<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
anoterInstance<span class="token punctuation">.</span>habbit<span class="token punctuation">;</span> <span class="token comment">// ['tennis', 'read']</span>
instance<span class="token punctuation">.</span>habbit<span class="token punctuation">;</span> <span class="token comment">// ['read']</span>
</code></pre></div><p>组合继承利用了原型链和借用构造函数的优点，同时规避了二者的缺点。</p> <h2 id="_4-原型式继承"><a href="#_4-原型式继承" class="header-anchor">#</a> 4. 原型式继承</h2> <blockquote><p>以给定对象为原型，创建一个新对象。
ES5中的<code>Object.create()</code>规范化了原型式继承。
这个方法接收两个参数:一 个用作新对象原型的对象和(可选的)一个为新对象定义额外属性的对象。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Lisa'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> inheritObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
inheritObj<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// Lisa</span>
inheritObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Eli'</span><span class="token punctuation">;</span>
inheritObj<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 'Eli'</span>
obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 'Lisa'</span>
</code></pre></div><p>让我们手写一个原型式继承：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myInheritance</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  fn<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Lisa'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
inheritObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Eli'</span><span class="token punctuation">;</span>
inheritObj<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 'Eli'</span>
obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 'Lisa'</span>
</code></pre></div><p>问题：与原型链继承一样，原型中包含引用类型的值时，在实例化对象中修改，同样会影响到原型。</p> <h2 id="_5-寄生式继承"><a href="#_5-寄生式继承" class="header-anchor">#</a> 5. 寄生式继承</h2> <blockquote><p>基于某个对象，或某些信息创建一个对象，然后增强对象，最后返回对象。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 寄生式继承 </span>
<span class="token keyword">function</span> <span class="token function">parasiticInheritance</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 基于某个对象，或某些信息创建一个对象，getObject代指返回一个新对象的函数</span>
  <span class="token keyword">const</span> clone <span class="token operator">=</span> <span class="token function">getObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 通过设置对象的属性，增强对象</span>
  clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> clone<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'xo'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> anotherPerson <span class="token operator">=</span> <span class="token function">parasiticInheritance</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherPerson<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hi</span>
</code></pre></div><p>问题：因为在函数内部增强对象，所以函数无法复用。</p> <h2 id="_6-寄生组合式继承"><a href="#_6-寄生组合式继承" class="header-anchor">#</a> 6. 寄生组合式继承</h2> <blockquote><p>通过借用构造函数来继承属性，通过原型链的混合形式来继承方法。本质上，就是使用寄生式继承来继承超类型的原型，然后再将结果指定给子类型的原型。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>habbit <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'tennis'</span><span class="token punctuation">,</span> <span class="token string">'read'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
person1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">person1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用一次</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 寄生式继承</span>
<span class="token keyword">function</span> <span class="token function">parasiticInheritance</span><span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> proto <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
  proto<span class="token punctuation">.</span>constructor <span class="token operator">=</span> child<span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">parasiticInheritance</span><span class="token punctuation">(</span>person1<span class="token punctuation">,</span> person2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token string">'Lisa'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello, I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> anoterInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person2</span><span class="token punctuation">(</span><span class="token string">'Eli'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
anoterInstance<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello, I am Eli'</span>
instance<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello, I am Lisa'</span>

instance<span class="token punctuation">.</span>habbit<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
anoterInstance<span class="token punctuation">.</span>habbit<span class="token punctuation">;</span> <span class="token comment">// ['tennis', 'read']</span>
instance<span class="token punctuation">.</span>habbit<span class="token punctuation">;</span> <span class="token comment">// ['read']</span>
</code></pre></div><p>很显然，相较于组合式继承，寄生组合式只调用了一次<code>person1</code>函数，更为有效。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/8/2021, 2:22:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/xo-blog/js/prototype.html" class="prev">
        原型和原型链
      </a></span> <span class="next"><a href="/xo-blog/js/handleWrite.html">
        手写系列
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xo-blog/assets/js/app.205460ca.js" defer></script><script src="/xo-blog/assets/js/23.8124e3e4.js" defer></script><script src="/xo-blog/assets/js/22.896e3b57.js" defer></script><script src="/xo-blog/assets/js/48.cdf75c28.js" defer></script>
  </body>
</html>
