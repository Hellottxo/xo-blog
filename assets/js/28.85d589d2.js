(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{353:function(t,v,_){t.exports=_.p+"assets/img/gpuFlow.69fca151.png"},354:function(t,v,_){t.exports=_.p+"assets/img/layout.6fcbd3a4.jpg"},417:function(t,v,_){"use strict";_.r(v);var a=_(33),s=Object(a.a)({},(function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("什么是重绘和回流？重绘和回流是浏览器渲染过程中的一环，想要了解重绘和回流，首先需要了解浏览的渲染过程。\n")]),t._v(" "),a("h2",{attrs:{id:"浏览器渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染"}},[t._v("#")]),t._v(" 浏览器渲染")]),t._v(" "),a("p",[t._v("不同内核浏览器的渲染过程大同小异，以WebKit内核为例，浏览器的具体渲染过程如下图：\n"),a("img",{attrs:{src:_(353),alt:"gpuFlow"}})]),t._v(" "),a("ol",[a("li",[t._v("分别解析HTML和CSS，生成DOM树和CSSOM树；")]),t._v(" "),a("li",[t._v("结合生成的DOM树和CSSOM树，构建呈现树，呈现树中的元素称为呈现器，此时的呈现器不包含位置和大小信息，；")]),t._v(" "),a("li",[t._v("回流，又称布局或者重排，计算呈现树中节点的位置及大小信息。")]),t._v(" "),a("li",[t._v("绘制，将呈现器的内容显示在屏幕上。")])]),t._v(" "),a("h2",{attrs:{id:"布局-回流-重排"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局-回流-重排"}},[t._v("#")]),t._v(" 布局/回流/重排")]),t._v(" "),a("p",[t._v("呈现器在创建完成并添加到呈现树时，并不包含位置和大小信息。计算这些值的过程称为布局或重排。"),a("br"),t._v(" "),a("strong",[t._v("触发布局的操作有：")])]),t._v(" "),a("ol",[a("li",[t._v("全局样式的更改，如改变字体大小")]),t._v(" "),a("li",[t._v("屏幕大小调整")]),t._v(" "),a("li",[t._v("呈现器位置和大小的改变")]),t._v(" "),a("li",[t._v("读取offsetHeight/clientHeight等信息")])]),t._v(" "),a("p",[t._v("为避免对所有细小更改都进行整体布局，浏览器采用了一种“dirty 位”系统。如果某个呈现器发生了更改，或者将自身及其子代标注为“dirty”，则需要进行布局。"),a("br"),t._v("\n因此，布局又可以分为全局布局和增量布局。同时布局的执行方式又可以分为异步执行和同步执行。\n"),a("img",{attrs:{src:_(354),alt:"layout"}})]),t._v(" "),a("h2",{attrs:{id:"重绘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重绘"}},[t._v("#")]),t._v(" 重绘")]),t._v(" "),a("p",[t._v("将呈现器中的内容呈现到屏幕上到过程就称为绘制。因此，呈现器中内容或样式到修改导致到重新绘制，又称为重绘。"),a("br"),t._v("\n呈现器上几何信息的修改触发布局到改变到样式呈现在用户面前，必经之路就是绘制。除此之外，修改呈现器的color、opacity等不影响位置和大小信息的操作，也会触发绘制。"),a("br"),t._v("\n一言概之就是：** 回流一定会重绘，但重绘不一定会回流 **。")]),t._v(" "),a("h2",{attrs:{id:"优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[t._v("#")]),t._v(" 优化")]),t._v(" "),a("ol",[a("li",[t._v("尽量避免使用"),a("code",[t._v("display: table")]),t._v("及"),a("code",[t._v("<Table>")]),t._v("，布局过程中表格的计算需要经历不止一次的遍历")]),t._v(" "),a("li",[t._v("尽量连续读取offsetHeight等信息")]),t._v(" "),a("li",[t._v("尽量连续修改DOM样式，或直接修改class")]),t._v(" "),a("li",[t._v("使用"),a("code",[t._v("documnetFragment")]),t._v("进行DOM操作")]),t._v(" "),a("li",[t._v("GPU加速，如使用"),a("code",[t._v("will-change")]),t._v("将元素提升至合成层。")])])])}),[],!1,null,null,null);v.default=s.exports}}]);