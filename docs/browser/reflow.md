# 回流和重绘
什么是重绘和回流？ 
重绘和回流是浏览器渲染过程中的一环，想要了解重绘和回流，首先需要了解浏览的渲染过程
## 浏览器渲染
不同内核浏览器的渲染过程大同小异，以WebKit内核为例，浏览器的具体渲染过程如下图：
![gpuFlow](../assets/gpuFlow.png)
1. 分别解析HTML和CSS，生成DOM树和CSSOM树；
2. 结合生成的DOM树和CSSOM树，构建呈现树，呈现树中的元素称为呈现器，此时的呈现器不包含位置和大小信息，；
3. 回流，又称布局或者重排，计算呈现树中节点的位置及大小信息。
4. 绘制，将呈现器的内容显示在屏幕上。

## 布局/回流/重排
呈现器在创建完成并添加到呈现树时，并不包含位置和大小信息。计算这些值的过程称为布局或重排。  
**触发布局的操作有：**
1. 全局样式的更改，如改变字体大小
2. 屏幕大小调整
3. 呈现器位置和大小的改变
4. 读取offsetHeight/clientHeight等信息

为避免对所有细小更改都进行整体布局，浏览器采用了一种“dirty 位”系统。如果某个呈现器发生了更改，或者将自身及其子代标注为“dirty”，则需要进行布局。  
因此，布局又可以分为全局布局和增量布局。同时布局的执行方式又可以分为异步执行和同步执行。
![layout](../assets/layout.jpg)

## 重绘
根据呈现树及Layout生成的几何信息得到节点的绝对像素，这个过程就称为重绘。