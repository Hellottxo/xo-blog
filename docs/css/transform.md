# ç”¨ css å®ç°è§†å·®æ•ˆæœ

æŸä¸ªæœˆé»‘é£é«˜çš„å¤œæ™šï¼Œå‰ç«¯å°ç™½èœæ”¶åˆ°ä¸€ä¸ªä»»åŠ¡ï¼šåšä¸€å¼ åƒç‹è€…è£è€€ç™»å½•ç•Œé¢ä¸€æ ·çš„å›¾ç‰‡ã€‚

<!-- more -->

è®©æˆ‘ä»¬å…ˆä¸Šæ•ˆæœï¼šå½“å½“å½“ï¼Œé¼ æ ‡åœ¨ä¸‹é¢å›¾ç‰‡ä¸­æ»‘åŠ¨å°±å¯ä»¥çœ‹åˆ°å“¦ ğŸ˜¯

![](../assets/example.gif)

æ˜¯ä¸æ˜¯çœ‹èµ·æ¥å¾ˆç®€å•ï¼Ÿå…¶å®ï¼ŒçœŸçš„ï¼Œå¾ˆç®€å•ï¼

æ¥ä¸‹æ¥ï¼Œæ˜¯æ‰‹æ‘¸æ‰‹æ•™å­¦æ—¶é—´ï¼:100:

## æ‘†æ”¾å›¾ç‰‡

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥ä¸€å¼ èƒŒæ™¯å›¾ç‰‡ï¼Œå†æ”¾ä¸Šä¸¤åªçŒªï¼Œhtml å’Œ css ä»£ç ï¼š

```css
<style>
  body {
    margin: 0;
  }
  .container {
    position: relative;
    width: 1080px;
    height: 600px;
    background: url(back.png) 100% no-repeat;
    margin: 0 auto;
  }
  img {
    height: 300px;
    position: absolute;
    bottom: 0;
  }
  .pig1 {
    right: 300px;
  }
  .pig2 {
    left: 300px;
  }
</style>

<body>
  <div class="container">
    <div class="pig1">
      <img src="1.jpg" alt="">
    </div>
    <div class="pig2">
      <img src="2.jpg" alt="">
    </div>
  </div>
</body>
```

æ¥ä¸‹æ¥çš„ä»»åŠ¡ï¼Œå°±æ˜¯è®©è¿™ä¸¤åªçŒªéšç€æˆ‘ä»¬çš„~~çŒªè¹„~~é¼ æ ‡è½»è½»ç‚¹å‡»åŠ¨èµ·æ¥ã€‚

## è·å–é¼ æ ‡ç§»åŠ¨çš„åæ ‡

æ ¹æ®æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„å›¾ç‰‡ä¸é¼ æ ‡ä¹‹é—´çš„äº¤äº’æ•ˆæœï¼Œä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¥å›¾ç‰‡çš„ä¸­å¿ƒä¸ºåŸç‚¹ï¼Œå»ºç«‹ä¸€ä¸ªåæ ‡è½´ã€‚ é‚£ä¹ˆä»¥è¿™ä¸ªåæ ‡è½´ä¸ºåŸºå‡†ï¼Œè®¡ç®—é¼ æ ‡åœ¨å›¾ç‰‡ä¸Šæ»‘è¿‡æ—¶çš„åæ ‡ js ä¸ºï¼š

```js
$(".container").mousemove(function () {
  //ä»¥å›¾ç‰‡ä¸­å¿ƒä¸ºåŸç‚¹ï¼Œé¼ æ ‡çš„æ¨ªçºµåæ ‡ï¼šmousex,mousey
  let mousex =
    event.clientX - $(".container").offset().left - $(".container").width() / 2;
  let mousey =
    event.clientY - $(".container").offset().top - $(".container").height() / 2;
});
```

è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è®©å°çŒªåŠ¨èµ·æ¥å‘€...ä¸è¦ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ css ä¸­çš„ transform å±æ€§ã€‚

W3C ä¸­æ˜¯è¿™æ ·å­ä»‹ç»æ»´:

> transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚

å…¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åº”ç”¨çš„è¯­æ³•æœ‰ï¼š

| å€¼                  | æè¿°                             |
| ------------------- | -------------------------------- |
| rotateX(angle)      | å®šä¹‰æ²¿ç€ X è½´çš„ 3D æ—‹è½¬ã€‚        |
| rotateY(angle)      | å®šä¹‰æ²¿ç€ Y è½´çš„ 3D æ—‹è½¬ã€‚        |
| perspective(n)      | ä¸º 3D è½¬æ¢å…ƒç´ å®šä¹‰é€è§†è§†å›¾ã€‚     |
| matrix(a,b,c,d,e,f) | å®šä¹‰ 2D è½¬æ¢ï¼Œä½¿ç”¨å…­ä¸ªå€¼çš„çŸ©é˜µã€‚ |

ä»¥ä¸Šé¢çš„å°çŒªä»”ä»¬ä¸ºä¾‹ï¼Œå‡è®¾å°çŒªä»”å›¾ç‰‡çš„ä¸­å¿ƒç‚¹åæ ‡ä¸ºï¼ˆx,yï¼‰ã€‚  
**å·²çŸ¥**ï¼š`transform`çš„æ—‹è½¬é»˜è®¤æ˜¯å›´ç»•ç€å°çŒªä»”ä»¬çš„ä¸­å¿ƒç‚¹åæ ‡ï¼ˆx,yï¼‰  
**é—®**ï¼šå¦‚ä½•é€šè¿‡`transform:matrix(a,b,c,d,e,f)`ä¸­å…­ä¸ªå‚æ•°æˆ‘ä»¬å¯ä»¥å¯¹å°çŒªä»”è¿›è¡Œ 2D è½¬æ¢ï¼Ÿ  
**è§£**ï¼š  
**matrix**ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ª 2D è½¬æ¢ä¸çŸ©é˜µæœ‰ç€ä¸å¯è¨€è¯´çš„å…³ç³»ã€‚ `transform:matrix(a,b,c,d,e,f)`ä¸­å…­ä¸ªå‚æ•°ç›¸å¯¹åº”çš„çŸ©é˜µä¸ºï¼š  
![matrix](../assets/matrix.png)

ç›¸åº”çš„ï¼Œè¿™å…­ä¸ªå‚æ•°å¯¹(o,o)åæ ‡çš„å½±å“è®¡ç®—å…¬å¼ä¸ºï¼š  
![matrix](../assets/matrixFunc.png)

ç»è¿‡ 2D è½¬æ¢åä¸­å¿ƒç‚¹çš„æ¨ªçºµåæ ‡ä¸ºï¼š

```js
x = ax + cy + e;
y = bx + dy + f;
```

é‚£ä¹ˆåˆ°åº•æ€ä¹ˆç”¨å‘¢ï¼Ÿ  
**ä¸¾ä¸ªæ —å­**ï¼Œæˆ‘ä»¬æƒ³è®©å°çŒªæ°´å¹³å¾€å·¦æŒª 5pxï¼Œå†å‚ç›´å¾€ä¸ŠæŒª 2pxï¼Œè®¾ç½®

```css
transform: matrix(1, 0, 0, 1, 5, 2);
```

å› æ­¤,å½“æˆ‘ä»¬éœ€è¦åˆ©ç”¨`transform:matrix(a,b,c,d,e,f)`å¯¹å°çŒªè¿›è¡Œå¹³é¢ä½ç½®ä¸Šå¯¹åç§»æ“ä½œæ—¶ï¼Œåªè¦è®°ä½ï¼š

```css
transform: matrix(a, b, c, d, æ°´å¹³åç§»å€¼, å‚ç›´åç§»å€¼);
```

å½“ç„¶ï¼Œ`matrix(a,b,c,d,e,f)`è¿™ä¸ªçœ‹ä¸Šå»==å¾ˆå¤§ä¸€å¨å¾ˆç‰›é€¼==çš„ä¸œè¥¿å¯ä¸æ­¢è¿™ä¸ªå°å°çš„ç”¨æ³•å“Ÿï¼Œ`rotateX()`å’Œ`rotateY()`éƒ½å¯ä»¥ç”¨`matrix(a,b,c,d,e,f)`å®ç°ã€‚æœ‰å…´è¶£çš„å°æœ‹å‹ä»¬å¯ä»¥è‡ªå·±å»ç ”ç©¶ä¸€ä¸‹å“Ÿï½

## èƒŒæ™¯å›¾éšé¼ æ ‡ç§»åŠ¨å€¾æ–œ

æ ¹æ®æˆ‘ä»¬æƒ³å¾—åˆ°çš„äº¤äº’æ•ˆæœï¼Œåœ¨ä¹‹å‰å»ºç«‹çš„åæ ‡è½´ä¸­ï¼Œ`rotateX()` `rotateY()`å€¼çš„æ­£è´Ÿå¦‚ä¸‹ï¼š
![scale](../assets/scale.png)
è®©æˆ‘ä»¬ç«é€Ÿå†™å¥½ css å’Œ jsï¼š

```js
let mousex, mousey, changex, changey;
let mv = 500;
$(".container").mousemove(function () {
  //ç›¸å¯¹å›¾ç‰‡ä¸­å¿ƒä¸ºåæ ‡è½´ï¼Œé¼ æ ‡ç§»åŠ¨çš„ä½ç½®
  mousex =
    event.clientX - $(".container").offset().left - $(".container").width() / 2;
  mousey =
    event.clientY - $(".container").offset().top - $(".container").height() / 2;

  changex = mousey / mv;
  changey = mousex / mv;

  //æ ¹æ®é¼ æ ‡ç§»åŠ¨çš„ç›¸å¯¹åæ ‡è¿›è¡ŒèƒŒæ™¯å›¾ç‰‡ç¿»è½¬
  $(".container").css(
    "transform",
    "perspective(400px) rotatex(" + changex + "deg) rotateY(" + changey + "deg)"
  );

  //æ ¹æ®é¼ æ ‡ç§»åŠ¨çš„å¯¹ç›¸å¯¹åæ ‡è°ƒæ•´ä¸¤åªçŒªå¯¹è·ç¦»
  $(".pig2").css(
    "transform",
    "matrix(1,0,0,1," + mousex / -30 + "," + mousey / -30 + ")"
  );
  $(".pig1").css(
    "transform",
    "matrix(1,0,0,1," + mousex / 20 + "," + mousey / 20 + ")"
  );
});

$(".container").mouseout(function () {
  $(".container").css(
    "transform",
    "perspective(400px) rotatex(0deg) rotateY(0deg)"
  );
  $(".pig2").css("transform", "matrix(1,0,0,1,0,0)");
  $(".pig1").css("transform", "matrix(1,0,0,1,0,0)");
});
```

å¥½å•¦ï¼Œç°åœ¨ä¸€ä¸ªæœ‰é¼ æ ‡äº¤äº’æ•ˆæœçš„å›¾ç‰‡å·²ç»åšå¥½å•¦ï½
